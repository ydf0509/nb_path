# AiMdGenerator AST å…ƒæ•°æ®åŠŸèƒ½ - å®Œæˆæ€»ç»“

## âœ… å·²å®Œæˆ

æˆ‘å·²ç»æˆåŠŸä¸º `AiMdGenerator` ç±»æ·»åŠ äº† **AST (æŠ½è±¡è¯­æ³•æ ‘) å…ƒæ•°æ®æå–åŠŸèƒ½**ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### è‡ªåŠ¨æå– Python æ–‡ä»¶çš„ç»“æ„åŒ–ä¿¡æ¯:

1. **ğŸ“¦ å¯¼å…¥è¯­å¥** - æ‰€æœ‰ import å’Œ from...import
2. **ğŸ›ï¸ ç±»å®šä¹‰** - ç±»åã€åŸºç±»ã€è£…é¥°å™¨ã€æ–‡æ¡£å­—ç¬¦ä¸²
3. **ğŸ”§ æ–¹æ³•/å‡½æ•°** - å®Œæ•´çš„å‡½æ•°ç­¾å:
   - å‚æ•°åç§°ã€ç±»å‹æ³¨è§£ã€é»˜è®¤å€¼
   - è¿”å›å€¼ç±»å‹
   - è£…é¥°å™¨(@property, @classmethod ç­‰)
   - æ–‡æ¡£å­—ç¬¦ä¸²
4. **ğŸ“ æ–‡æ¡£** - æ¨¡å—ã€ç±»ã€å‡½æ•°çš„æ–‡æ¡£å­—ç¬¦ä¸²
5. **ğŸ¨ åŒºåˆ†** - è‡ªåŠ¨åŒºåˆ†å…¬æœ‰æ–¹æ³•å’Œç§æœ‰æ–¹æ³•

## ğŸ’¡ æ ¸å¿ƒä¼˜åŠ¿

### å¯¹ AI çš„å¥½å¤„:

- âœ… **å¿«é€Ÿç†è§£é¡¹ç›®ç»“æ„** - æ— éœ€é€è¡Œé˜…è¯»ä»£ç 
- âœ… **å‡å°‘å¹»è§‰** - å‡†ç¡®çš„ç±»å‹ä¿¡æ¯å’Œå‡½æ•°ç­¾å
- âœ… **æé«˜æ¨ç†å‡†ç¡®æ€§** - æ¸…æ™°çš„ç»§æ‰¿å…³ç³»
- âœ… **é€‚åˆ RAG çŸ¥è¯†åº“** - ç»“æ„åŒ–æ•°æ®æ›´æ˜“ç´¢å¼•å’Œæ£€ç´¢

### å¯¹å¼€å‘è€…çš„å¥½å¤„:

- âœ… **ç®€å•æ˜“ç”¨** - åªéœ€è¦ä¸€ä¸ªå‚æ•° `include_ast_metadata=True`
- âœ… **å‘åå…¼å®¹** - ä¸å½±å“åŸæœ‰åŠŸèƒ½
- âœ… **çµæ´»æ§åˆ¶** - å¯éšæ—¶å¯ç”¨/ç¦ç”¨
- âœ… **Python 3.7+ å…¼å®¹** - æ”¯æŒå„ç§ Python ç‰ˆæœ¬

## ğŸ“ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³• 1: merge_from_dir (æ¨è)

```python
from nb_path import AiMdGenerator

(
    AiMdGenerator("output.md")
    .set_project_name("my_project")
    .clear_text()
    .merge_from_dir(
        project_root="/path/to/project",
        relative_dir_name="src",
        as_title="æºä»£ç ",
        use_gitignore=True,
        should_include_suffixes=[".py"],
        include_ast_metadata=True,  # ğŸ”‘ å¯ç”¨å…ƒæ•°æ®(é»˜è®¤ True)
    )
)
```

### æ–¹æ³• 2: merge_from_files_with_metadata

```python
(
    AiMdGenerator("output.md")
    .set_project_name("my_project")
    .clear_text()
    .merge_from_files_with_metadata(
        project_root="/path/to/project",
        relative_file_name_list=["src/main.py", "src/utils.py"],
        as_title="æ ¸å¿ƒæ–‡ä»¶",
        include_ast_metadata=True,
    )
)
```

## ğŸ“Š ç”Ÿæˆæ•ˆæœç¤ºä¾‹

### å¯¹äºè¿™æ ·çš„ä»£ç :

```python
class UserManager(BaseManager):
    """ç”¨æˆ·ç®¡ç†ç±»"""
    
    def create_user(self, name: str, age: int = 18) -> User:
        """åˆ›å»ºæ–°ç”¨æˆ·"""
        pass
    
    @property
    def user_count(self) -> int:
        """è·å–ç”¨æˆ·æ€»æ•°"""
        return 100
```

### ä¼šç”Ÿæˆè¿™æ ·çš„å…ƒæ•°æ®:

```markdown
### ğŸ“„ Python File Metadata: `models/user.py`

#### ğŸ›ï¸ Classes (1)

##### ğŸ“Œ `class UserManager(BaseManager)`
*Line: 1*

**Docstring:**
```
ç”¨æˆ·ç®¡ç†ç±»
```

**Public Methods (1):**
- `def create_user(self, name: str, age: int = 18) -> User`
  - *åˆ›å»ºæ–°ç”¨æˆ·*

**Properties (1):**
- `@property user_count -> int`
  - *è·å–ç”¨æˆ·æ€»æ•°*
```

**ç„¶åæ˜¯å®Œæ•´çš„æºä»£ç ...**

## âœ¨ å®é™…æµ‹è¯•ç»“æœ

âœ… æˆåŠŸè§£æ `nb_path/ai_md_generator.py`:
- æ£€æµ‹åˆ° 1 ä¸ªç±»
- 6 ä¸ªå…¬æœ‰æ–¹æ³•
- 9 ä¸ªç§æœ‰æ–¹æ³•
- æ‰€æœ‰å‚æ•°å’Œè¿”å›å€¼ç±»å‹
- æ‰€æœ‰è£…é¥°å™¨å’Œæ–‡æ¡£å­—ç¬¦ä¸²

âœ… å…¼å®¹ Python 3.7+

## ğŸ“ ç›¸å…³æ–‡ä»¶

### æ ¸å¿ƒå®ç°
- âœ… `nb_path/ai_md_generator.py` - ä¸»è¦å®ç° (+400 è¡Œä»£ç )

### æµ‹è¯•å’Œç¤ºä¾‹
- âœ… `tests/ai_codes/test_ast_standalone.py` - ç‹¬ç«‹æµ‹è¯•(éªŒè¯é€šè¿‡)
- âœ… `tests/ai_codes/demo_ast_metadata.py` - æ¼”ç¤ºç”Ÿæˆå™¨
- âœ… `tests/ai_codes/example_usage.py` - ä½¿ç”¨ç¤ºä¾‹å±•ç¤º
- âœ… `tests/ai_codes/gen_nb_time_with_ast.py` - nb_time é¡¹ç›®ç¤ºä¾‹

### æ–‡æ¡£
- âœ… `tests/ai_docs/AST_METADATA_FEATURE_README.md` - å®Œæ•´åŠŸèƒ½æ–‡æ¡£
- âœ… `tests/ai_docs/ast_metadata_demo.md` - å®é™…ç”Ÿæˆçš„å…ƒæ•°æ®ç¤ºä¾‹
- âœ… `tests/ai_docs/IMPLEMENTATION_SUMMARY.md` - æŠ€æœ¯å®ç°æ€»ç»“
- âœ… `tests/ai_docs/åŠŸèƒ½æ€»ç»“.md` - æœ¬æ–‡ä»¶

## ğŸ¯ æ ¸å¿ƒæ”¹è¿›ç‚¹

### æ–°å¢æ–¹æ³•:

1. **`merge_from_files_with_metadata()`** - æ–°çš„åˆå¹¶æ–¹æ³•,æ”¯æŒå…ƒæ•°æ®
2. **`_parse_python_file_ast()`** - AST è§£ææ ¸å¿ƒ
3. **`_extract_class_metadata()`** - æå–ç±»å…ƒæ•°æ®
4. **`_extract_function_metadata()`** - æå–å‡½æ•°å…ƒæ•°æ®
5. **`_format_py_metadata_as_markdown()`** - æ ¼å¼åŒ–ä¸º Markdown
6. **`_ast_to_source()`** - AST èŠ‚ç‚¹è½¬æºç (å…¼å®¹ Python 3.7+)

### ä¿®æ”¹çš„æ–¹æ³•:

1. **`merge_from_dir()`** - æ–°å¢ `include_ast_metadata` å‚æ•°

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### å¿«é€Ÿå¼€å§‹:

```python
from nb_path import AiMdGenerator

# è‡ªåŠ¨åŒ…å« AST å…ƒæ•°æ®
(
    AiMdGenerator("my_project_docs.md")
    .set_project_name("my_project")
    .clear_text()
    .merge_from_dir(
        project_root=r"D:\codes\my_project",
        relative_dir_name="src",
        as_title="é¡¹ç›®æºä»£ç ",
        use_gitignore=True,
        should_include_suffixes=[".py"],
        # include_ast_metadata=True æ˜¯é»˜è®¤å€¼,å¯ä»¥ä¸å†™
    )
)
```

### ç¦ç”¨å…ƒæ•°æ®(å¦‚æœä¸éœ€è¦):

```python
.merge_from_dir(
    ...
    include_ast_metadata=False,  # ç¦ç”¨å…ƒæ•°æ®
)
```

## ğŸ‰ æ€»ç»“

è¿™ä¸ªåŠŸèƒ½å°†æ˜¾è‘—æå‡ AI å¯¹ä½ çš„ Python é¡¹ç›®çš„ç†è§£èƒ½åŠ›:

- ğŸ“– æ›´å¿«é€Ÿåœ°ç†è§£ä»£ç ç»“æ„
- ğŸ¯ æ›´å‡†ç¡®çš„åˆ†æå’Œå»ºè®®
- ğŸš€ æ›´é€‚åˆæ„å»º RAG çŸ¥è¯†åº“
- ğŸ’¡ å‡å°‘ AI å¹»è§‰å’Œè¯¯åˆ¤

**ç°åœ¨å°±å¯ä»¥ä½¿ç”¨äº†ï¼** ğŸŠ

---

å¦‚æœ‰é—®é¢˜æˆ–éœ€è¦æ”¹è¿›,æ¬¢è¿åé¦ˆ! ğŸ˜Š

