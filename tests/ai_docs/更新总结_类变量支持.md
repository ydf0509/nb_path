# AST å…ƒæ•°æ®åŠŸèƒ½ - ç±»å˜é‡æ”¯æŒæ›´æ–°

## âœ… æ›´æ–°å®Œæˆ

å·²æˆåŠŸä¸º `AiMdGenerator` çš„ AST å…ƒæ•°æ®åŠŸèƒ½**æ·»åŠ å®Œæ•´çš„ç±»å˜é‡æå–å’Œæ˜¾ç¤ºæ”¯æŒ**ï¼

## ğŸ¯ æ–°å¢åŠŸèƒ½

### ç±»å˜é‡å®Œæ•´æå–

ç°åœ¨èƒ½å¤Ÿæå–å’Œæ˜¾ç¤ºï¼š

1. **å˜é‡åç§°** - å¦‚ `MAX_SIZE`, `FORMATTER_DATETIME`
2. **ç±»å‹æ³¨è§£** - å¦‚ `: str`, `: int`
3. **èµ‹å€¼çš„å€¼** - å¦‚ `= 100`, `= '%Y-%m-%d'`
4. **è¡Œå·** - æ–¹ä¾¿å®šä½

## ğŸ“Š å®é™…æ•ˆæœ

### å¯¹äºè¿™æ ·çš„ç±»ï¼š

```python
class NbTime:
    """æ—¶é—´è½¬æ¢ç±»"""
    
    # æ ¼å¼åŒ–å­—ç¬¦ä¸²
    FORMATTER_DATETIME = "%Y-%m-%d %H:%M:%S %z"
    FORMATTER_DATE = "%Y-%m-%d"
    
    # æ—¶åŒºå¸¸é‡
    TIMEZONE_UTC = 'UTC'
    TIMEZONE_EASTERN_8 = 'UTC+8'
    
    # é…ç½®å˜é‡ï¼ˆå¸¦ç±»å‹æ³¨è§£ï¼‰
    default_formatter: str = None
    default_time_zone: str = None
```

### ç°åœ¨ä¼šç”Ÿæˆï¼š

```markdown
##### ğŸ“Œ `class NbTime`
*Line: 1*

**Docstring:**
```
æ—¶é—´è½¬æ¢ç±»
```

**Class Variables (6):**
- `FORMATTER_DATETIME = '%Y-%m-%d %H:%M:%S %z'`
- `FORMATTER_DATE = '%Y-%m-%d'`
- `TIMEZONE_UTC = 'UTC'`
- `TIMEZONE_EASTERN_8 = 'UTC+8'`
- `default_formatter: str = None`
- `default_time_zone: str = None`
```

## ğŸ”§ ä¿®æ”¹çš„ä»£ç 

### 1. å¢å¼º `_extract_class_metadata()` æ–¹æ³•

- æå–ç±»å˜é‡æ—¶ç°åœ¨ä¹Ÿæå–èµ‹å€¼çš„å€¼
- å¯¹äºå¸¦ç±»å‹æ³¨è§£çš„å˜é‡ï¼š`name: type = value`
- å¯¹äºæ™®é€šå˜é‡ï¼š`name = value`
- è‡ªåŠ¨é™åˆ¶å€¼çš„é•¿åº¦ï¼ˆè¶…è¿‡ 50 å­—ç¬¦æˆªæ–­ï¼‰

### 2. æ›´æ–° `_format_py_metadata_as_markdown()` æ–¹æ³•

- æ·»åŠ  **Class Variables** éƒ¨åˆ†
- æ˜¾ç¤ºå˜é‡åã€ç±»å‹å’Œå€¼
- æ ¼å¼: `` `name: type = value` ``

## ğŸ“‹ æ”¯æŒçš„åœºæ™¯

### âœ… ç®€å•å¸¸é‡
```python
MAX_SIZE = 100
DEFAULT_NAME = "default"
```

### âœ… å¸¦ç±»å‹æ³¨è§£
```python
default_config: str = None
max_retries: int = 3
```

### âœ… å¤æ‚è¡¨è¾¾å¼
```python
TIMEZONE = datetime.timezone(datetime.timedelta(hours=8))
```
æ˜¾ç¤ºä¸º: `TIMEZONE = datetime.timezone(...)`

### âœ… Pydantic æ¨¡å‹
```python
class User(BaseModel):
    name: str
    age: int
    email: Optional[str] = None
```

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•æ–‡ä»¶ï¼š

1. **`tests/ai_codes/test_class_variables.py`** - åŸºç¡€åŠŸèƒ½æµ‹è¯•
2. **`tests/ai_codes/test_nbtime_class_vars.py`** - NbTime ç±»æµ‹è¯•

### æµ‹è¯•ç»“æœï¼š

```
âœ… æˆåŠŸæå– 16 ä¸ªç±»å˜é‡
âœ… æ­£ç¡®æ˜¾ç¤ºå˜é‡åã€ç±»å‹å’Œå€¼
âœ… å¤æ‚è¡¨è¾¾å¼æ­£ç¡®ç®€åŒ–
âœ… è¶…é•¿å€¼æ­£ç¡®æˆªæ–­
âœ… Python 3.7 å…¼å®¹æ€§æ­£å¸¸
```

## ğŸ’¡ å¯¹ AI çš„å¥½å¤„

1. **å¿«é€Ÿç†è§£é…ç½®** - æ‰€æœ‰å¸¸é‡ä¸€ç›®äº†ç„¶
2. **å‡†ç¡®çš„ç±»å‹ä¿¡æ¯** - çŸ¥é“æ¯ä¸ªé…ç½®çš„ç±»å‹
3. **é»˜è®¤å€¼å¯è§** - äº†è§£é»˜è®¤é…ç½®
4. **å‡å°‘å¹»è§‰** - å‡†ç¡®çš„å¸¸é‡åç§°å’Œå€¼
5. **æ›´å¥½çš„ä»£ç ç”Ÿæˆ** - çŸ¥é“å¯ç”¨çš„å¸¸é‡é€‰é¡¹

## ğŸš€ ä½¿ç”¨æ–¹æ³•

æ— éœ€æ”¹å˜ä»»ä½•ä»£ç ï¼å¦‚æœå·²ç»åœ¨ä½¿ç”¨ AST å…ƒæ•°æ®åŠŸèƒ½ï¼Œç±»å˜é‡ä¼šè‡ªåŠ¨åŒ…å«ï¼š

```python
from nb_path import AiMdGenerator

(
    AiMdGenerator("output.md")
    .set_project_name("my_project")
    .clear_text()
    .merge_from_dir(
        project_root="/path/to/project",
        relative_dir_name="src",
        as_title="æºä»£ç ",
        include_ast_metadata=True,  # è‡ªåŠ¨åŒ…å«ç±»å˜é‡
    )
)
```

## ğŸ“Š å…ƒæ•°æ®ç»“æ„

ç°åœ¨æ¯ä¸ªç±»çš„å…ƒæ•°æ®åŒ…å«ï¼š

```python
{
    "name": "ClassName",
    "bases": ["BaseClass"],
    "docstring": "...",
    "methods": [...],
    "properties": [...],
    "class_variables": [  # æ–°å¢ï¼
        {
            "name": "VARIABLE_NAME",
            "type": "str",  # ç±»å‹æ³¨è§£ï¼ˆå¦‚æœæœ‰ï¼‰
            "value": "'default'",  # èµ‹å€¼çš„å€¼
            "lineno": 10
        }
    ]
}
```

## ğŸ‰ æ€»ç»“

ç±»å˜é‡æå–åŠŸèƒ½ç°å·²å®Œæ•´å®ç°å¹¶æµ‹è¯•é€šè¿‡ï¼

è¿™å¯¹äºç†è§£é…ç½®å¯†é›†å‹çš„ç±»ï¼ˆå¦‚ `NbTime`, Pydantic æ¨¡å‹ç­‰ï¼‰ç‰¹åˆ«æœ‰ç”¨ï¼š

- âœ… **è‡ªåŠ¨æå–** - æ— éœ€æ‰‹åŠ¨ç¼–å†™
- âœ… **ä¿¡æ¯å®Œæ•´** - åç§°ã€ç±»å‹ã€å€¼å…¨éƒ½æœ‰
- âœ… **æ ¼å¼ç¾è§‚** - æ¸…æ™°çš„ Markdown å±•ç¤º
- âœ… **å‘åå…¼å®¹** - ä¸å½±å“åŸæœ‰åŠŸèƒ½
- âœ… **Python 3.7+** - å¹¿æ³›å…¼å®¹

è®© AI æ›´å¥½åœ°ç†è§£ä½ çš„ä»£ç é…ç½®ï¼ğŸŠ

---

## ğŸ“ ç›¸å…³æ–‡ä»¶

### æ ¸å¿ƒå®ç°
- `nb_path/ai_md_generator.py` - ä¸»è¦å®ç°ï¼ˆæ–°å¢çº¦ 30 è¡Œï¼‰

### æµ‹è¯•æ–‡ä»¶
- `tests/ai_codes/test_class_variables.py` - åŸºç¡€æµ‹è¯•
- `tests/ai_codes/test_nbtime_class_vars.py` - NbTime æµ‹è¯•

### æ–‡æ¡£
- `tests/ai_docs/ç±»å˜é‡æå–åŠŸèƒ½.md` - è¯¦ç»†è¯´æ˜
- `tests/ai_docs/æ›´æ–°æ€»ç»“_ç±»å˜é‡æ”¯æŒ.md` - æœ¬æ–‡ä»¶

### åŸæœ‰æ–‡æ¡£
- `tests/ai_docs/åŠŸèƒ½æ€»ç»“.md` - æ€»ä½“åŠŸèƒ½è¯´æ˜
- `tests/ai_docs/AST_METADATA_FEATURE_README.md` - å®Œæ•´æ–‡æ¡£

