# ç±»å˜é‡æå–åŠŸèƒ½ - æ›´æ–°è¯´æ˜

## âœ… æ–°å¢åŠŸèƒ½

åœ¨ä¹‹å‰çš„ AST å…ƒæ•°æ®åŠŸèƒ½åŸºç¡€ä¸Šï¼Œ**ç°åœ¨å·²ç»å®Œæ•´æ”¯æŒç±»å˜é‡çš„æå–å’Œæ˜¾ç¤º**ï¼

## ğŸ“Š æå–çš„ç±»å˜é‡ä¿¡æ¯

å¯¹äº Python ç±»ä¸­çš„ç±»å˜é‡ï¼Œç°åœ¨ä¼šæå–ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **å˜é‡åç§°**
2. **ç±»å‹æ³¨è§£**ï¼ˆå¦‚æœæœ‰ï¼‰
3. **èµ‹å€¼çš„å€¼**ï¼ˆé™åˆ¶é•¿åº¦ä¸º 50 å­—ç¬¦ï¼‰
4. **è¡Œå·**

## ğŸ¯ æ”¯æŒçš„ç±»å˜é‡ç±»å‹

### 1. ç®€å•å¸¸é‡

```python
class MyClass:
    MAX_SIZE = 100
    DEFAULT_NAME = "default"
    PI = 3.14159
```

**ç”Ÿæˆçš„å…ƒæ•°æ®ï¼š**
```markdown
**Class Variables (3):**
- `MAX_SIZE = 100`
- `DEFAULT_NAME = 'default'`
- `PI = 3.14159`
```

### 2. å¸¦ç±»å‹æ³¨è§£çš„å˜é‡

```python
class MyClass:
    default_config: str = None
    max_retries: int = 3
    timeout: float = 30.0
```

**ç”Ÿæˆçš„å…ƒæ•°æ®ï¼š**
```markdown
**Class Variables (3):**
- `default_config: str = None`
- `max_retries: int = 3`
- `timeout: float = 30.0`
```

### 3. å¤æ‚è¡¨è¾¾å¼

```python
import datetime

class NbTime:
    FORMATTER_DATETIME = "%Y-%m-%d %H:%M:%S %z"
    TIMEZONE_TZ_EAST_8 = datetime.timezone(datetime.timedelta(hours=8), name='UTC+08:00')
```

**ç”Ÿæˆçš„å…ƒæ•°æ®ï¼š**
```markdown
**Class Variables (2):**
- `FORMATTER_DATETIME = '%Y-%m-%d %H:%M:%S %z'`
- `TIMEZONE_TZ_EAST_8 = datetime.timezone(...)`  <!-- å¤æ‚è¡¨è¾¾å¼ä¼šç®€åŒ–æ˜¾ç¤º -->
```

## ğŸ“‹ å®é™…ç¤ºä¾‹ - NbTime ç±»

### æºä»£ç ï¼š

```python
class NbTime:
    """æ—¶é—´è½¬æ¢ï¼Œæ”¯æŒé“¾å¼æ“ä½œ"""
    
    # æ ¼å¼åŒ–å­—ç¬¦ä¸²å¸¸é‡
    FORMATTER_DATETIME = "%Y-%m-%d %H:%M:%S %z"
    FORMATTER_DATE = "%Y-%m-%d"
    FORMATTER_TIME = "%H:%M:%S"
    FORMATTER_ISO = "%Y-%m-%dT%H:%M:%S%z"
    
    # æ—¶åŒºå¸¸é‡
    TIMEZONE_UTC = 'UTC'
    TIMEZONE_EASTERN_8 = 'UTC+8'
    TIMEZONE_ASIA_SHANGHAI = 'Asia/Shanghai'
    
    # é…ç½®å˜é‡ï¼ˆå¸¦ç±»å‹æ³¨è§£ï¼‰
    default_formatter: str = None
    default_time_zone: str = None
```

### ç”Ÿæˆçš„å…ƒæ•°æ®ï¼š

```markdown
#### ğŸ›ï¸ Classes (1)

##### ğŸ“Œ `class NbTime`
*Line: 1*

**Docstring:**
```
æ—¶é—´è½¬æ¢ï¼Œæ”¯æŒé“¾å¼æ“ä½œ
```

**Class Variables (9):**
- `FORMATTER_DATETIME = '%Y-%m-%d %H:%M:%S %z'`
- `FORMATTER_DATE = '%Y-%m-%d'`
- `FORMATTER_TIME = '%H:%M:%S'`
- `FORMATTER_ISO = '%Y-%m-%dT%H:%M:%S%z'`
- `TIMEZONE_UTC = 'UTC'`
- `TIMEZONE_EASTERN_8 = 'UTC+8'`
- `TIMEZONE_ASIA_SHANGHAI = 'Asia/Shanghai'`
- `default_formatter: str = None`
- `default_time_zone: str = None`
```

## ğŸ¨ Pydantic æ¨¡å‹æ”¯æŒ

å¯¹äº Pydantic æ¨¡å‹ï¼Œç±»å˜é‡ä¹Ÿèƒ½æ­£ç¡®æå–ï¼š

```python
from pydantic import BaseModel
from typing import Optional

class User(BaseModel):
    name: str
    age: int
    email: Optional[str] = None
    is_active: bool = True
```

**ç”Ÿæˆçš„å…ƒæ•°æ®ï¼š**
```markdown
**Class Variables (4):**
- `name: str`
- `age: int`
- `email: Optional[str] = None`
- `is_active: bool = True`
```

## âš™ï¸ æŠ€æœ¯ç»†èŠ‚

### æå–é€»è¾‘

1. **`ast.AnnAssign`** - å¸¦ç±»å‹æ³¨è§£çš„èµ‹å€¼ï¼ˆå¦‚ `name: str = None`ï¼‰
2. **`ast.Assign`** - æ™®é€šèµ‹å€¼ï¼ˆå¦‚ `MAX_SIZE = 100`ï¼‰

### å€¼çš„å¤„ç†

- ç®€å•å€¼ç›´æ¥æ˜¾ç¤ºï¼šå­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼
- å¤æ‚è¡¨è¾¾å¼ç®€åŒ–æ˜¾ç¤ºï¼šå‡½æ•°è°ƒç”¨æ˜¾ç¤ºä¸º `func(...)`
- è¶…é•¿å€¼æˆªæ–­ï¼šè¶…è¿‡ 50 å­—ç¬¦è‡ªåŠ¨æ·»åŠ  `...`

### Python 3.7 å…¼å®¹æ€§

ä½¿ç”¨è‡ªå®šä¹‰çš„ `_ast_to_source()` æ–¹æ³•ï¼Œå…¼å®¹ Python 3.7+ï¼š
- Python 3.9+: ä½¿ç”¨ `ast.unparse()`
- Python 3.7/3.8: æ‰‹å·¥éå† AST èŠ‚ç‚¹

## ğŸ“Š æµ‹è¯•ç»“æœ

âœ… **æµ‹è¯•é€šè¿‡**: `tests/ai_codes/test_nbtime_class_vars.py`

```
ğŸ¯ æ‰¾åˆ° 16 ä¸ªç±»å˜é‡:

ğŸ“‹ æ ¼å¼åŒ–å­—ç¬¦ä¸²å¸¸é‡:
  â€¢ FORMATTER_DATETIME = '%Y-%m-%d %H:%M:%S %z'
  â€¢ FORMATTER_DATE = '%Y-%m-%d'
  ...

ğŸŒ æ—¶åŒºå¸¸é‡:
  â€¢ TIMEZONE_UTC = 'UTC'
  â€¢ TIMEZONE_EASTERN_8 = 'UTC+8'
  ...

âš™ï¸  é…ç½®å˜é‡:
  â€¢ default_formatter: str = NameConstant
  â€¢ default_time_zone: str = NameConstant
```

## ğŸ¯ ä¼˜åŠ¿

### å¯¹ AI çš„å¥½å¤„

1. **å¿«é€Ÿç†è§£é…ç½®é€‰é¡¹** - ä¸€çœ¼çœ‹åˆ°æ‰€æœ‰å¯ç”¨çš„å¸¸é‡
2. **æ¸…æ™°çš„ç±»å‹ä¿¡æ¯** - çŸ¥é“æ¯ä¸ªé…ç½®çš„ç±»å‹
3. **é»˜è®¤å€¼å¯è§** - äº†è§£é»˜è®¤é…ç½®
4. **å‡å°‘å¹»è§‰** - å‡†ç¡®çš„å¸¸é‡åç§°å’Œå€¼

### å¯¹å¼€å‘è€…çš„å¥½å¤„

1. **è‡ªåŠ¨æ–‡æ¡£** - ç±»å˜é‡è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£
2. **å¿«é€ŸæŸ¥è¯¢** - å¿«é€Ÿæ‰¾åˆ°å¯ç”¨çš„å¸¸é‡
3. **API è¯´æ˜** - æ¸…æ™°å±•ç¤ºå…¬å…± API
4. **é…ç½®ä¸€è§ˆ** - æ‰€æœ‰é…ç½®é¡¹ä¸€ç›®äº†ç„¶

## ğŸ“ å®Œæ•´ç¤ºä¾‹

```python
from nb_path import AiMdGenerator

(
    AiMdGenerator("output.md")
    .set_project_name("my_project")
    .clear_text()
    .merge_from_dir(
        project_root="/path/to/project",
        relative_dir_name="src",
        as_title="æºä»£ç ",
        use_gitignore=True,
        should_include_suffixes=[".py"],
        include_ast_metadata=True,  # è‡ªåŠ¨åŒ…å«ç±»å˜é‡
    )
)
```

ç”Ÿæˆçš„ Markdown ä¼šåŒ…å«ï¼š
- âœ… ç±»åå’ŒåŸºç±»
- âœ… æ–‡æ¡£å­—ç¬¦ä¸²
- âœ… å…¬æœ‰æ–¹æ³•åˆ—è¡¨
- âœ… å±æ€§ (properties)
- âœ… **ç±»å˜é‡**ï¼ˆæ–°å¢ï¼ï¼‰

## ğŸ‰ æ€»ç»“

ç±»å˜é‡æå–åŠŸèƒ½ç°å·²å®Œæ•´å®ç°ï¼

è¿™å¯¹äºç†è§£å’Œä½¿ç”¨åŒ…å«å¤§é‡é…ç½®å¸¸é‡çš„ç±»ï¼ˆå¦‚ `NbTime`ï¼‰ç‰¹åˆ«æœ‰ç”¨ï¼ŒAI èƒ½å¤Ÿï¼š

- ğŸ“– å¿«é€Ÿäº†è§£æ‰€æœ‰å¯ç”¨çš„é…ç½®é€‰é¡¹
- ğŸ¯ å‡†ç¡®ç†è§£æ¯ä¸ªå¸¸é‡çš„ç”¨é€”å’Œå€¼
- ğŸ’¡ å‡å°‘å…³äºå¸¸é‡åç§°å’Œå€¼çš„å¹»è§‰
- ğŸš€ æ›´é«˜æ•ˆåœ°ç”Ÿæˆä»£ç å’Œæ–‡æ¡£

**ç°åœ¨å°±å¯ä»¥ä½¿ç”¨äº†ï¼** ğŸŠ

---

## ğŸ“ ç›¸å…³æ–‡ä»¶

- `nb_path/ai_md_generator.py` - æ ¸å¿ƒå®ç°
- `tests/ai_codes/test_class_variables.py` - åŸºç¡€æµ‹è¯•
- `tests/ai_codes/test_nbtime_class_vars.py` - NbTime æµ‹è¯•
- `tests/ai_docs/ç±»å˜é‡æå–åŠŸèƒ½.md` - æœ¬æ–‡æ¡£

